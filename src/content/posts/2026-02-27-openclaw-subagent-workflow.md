---
title: "OpenClaw Sub-agent 并行工作流：复杂任务如何拆、如何收"
published: 2026-02-27
description: "用 sub-agent 把复杂任务拆解并行执行，主会话只做验收与汇总，提升交付速度。"
tags:
  - "开发笔记"
  - "OpenClaw"
  - "Sub-agent"
  - "工作流"
draft: false
lang: zh
---

## 适用场景

当你遇到这类任务时，建议用 sub-agent：

- 需要同时做调研 + 编码 +验证
- 单会话上下文太重，容易混乱
- 任务耗时长，不想阻塞主对话

## 核心模型

把任务分成两层：

- **主会话（主控）**：定义目标、验收标准、汇总结果
- **子代理（执行）**：按子任务独立跑，完成后回传

主会话不干重活，专门“控质量”。

## 拆分原则

一个子任务要满足三点：

1. 输入明确（给什么）
2. 输出明确（交什么）
3. 验收明确（算不算完成）

如果做不到，就先继续拆。

## 推荐拆法（示例）

目标：重构一个前端项目

- 子任务 A：梳理旧项目接口与路由
- 子任务 B：迁移首页与列表
- 子任务 C：迁移详情与评论
- 子任务 D：构建与测试回归

主会话最后统一收口：

- 检查改动
- 跑总测试
- 输出发布说明

## 执行节奏

1. 主会话下发任务模板
2. 子代理并行执行
3. 只在关键节点看状态（不要高频轮询）
4. 失败时定向 steer（补充约束）
5. 汇总后一次性验收

## 常见坑

### 坑 1：任务描述过大

后果：子代理输出发散。

解决：把“大目标”拆成多个可验收子任务。

### 坑 2：没有统一输出格式

后果：汇总困难。

解决：要求每个子任务固定输出：

- 修改文件
- 测试结果
- 风险点
- 下一步建议

### 坑 3：一直盯状态

后果：主会话被噪音拖垮。

解决：只在里程碑查看一次，异常再介入。

## 一份可复用子任务模板

- 任务目标：
- 范围边界：
- 交付物：
- 测试命令：
- 验收标准：
- 禁止事项：

## 总结

Sub-agent 的关键不是“并行”本身，而是“可验收的拆分”。
拆得好，速度和质量同时上升；拆不好，只会更乱。
